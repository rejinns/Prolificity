
<!DOCTYPE html>
<html>
<head>
 
  <!-- Responsive -->
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1">
  <meta http-equiv="X-UA-Compatible"
        content="ie=edge">
 
  <!-- Title -->
  <title>Hellow PWA</title>
 
  <!-- Meta Tags required for
       Progressive Web App -->
  <meta name=
  "apple-mobile-web-app-status-bar"
        content="#aa7700">
  <meta name="theme-color"
        content="black">
 
  <!-- Manifest File link -->
  <link rel="manifest"
        href="manifest.json">
</head>
 
<body>
  <h1 style="color: green;">
    The Moon</h1>
 
   
<p>
    How high is your tide today?
       
  </p>
  
 
<script>
const dtToday = new Date();
const dtFullMoon = new Date("2023-01-06");   //wolf moon
const diffInMs = Math.abs(dtToday - dtFullMoon);
// Convert milliseconds to days
const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));
const daysToFullMoon = diffInDays%28
console.log(daysToFullMoon); // Output: 45

//show moon phase icon
const moonPhases = ['ðŸŒ•', 'ðŸŒ–', 'ðŸŒ—', 'ðŸŒ˜','ðŸŒ‘', 'ðŸŒ’', 'ðŸŒ“', 'ðŸŒ”'];
if(daysToFullMoon == 0) 		nPhase = 0;
else if(0 < daysToFullMoon < 5)	nPhase = 1;
else if(5 < daysToFullMoon < 10)	nPhase = 2;
else if(10 < daysToFullMoon < 13)	nPhase = 3;
else if(14 < daysToFullMoon < 16)	nPhase = 4; //new moon
else if(16 < daysToFullMoon < 20)	nPhase = 5;
else if(20 < daysToFullMoon < 25)	nPhase = 6;
else if(25 < daysToFullMoon < 27)	nPhase = 7;
else if(27 < daysToFullMoon)		nPhase = 1;
document.write('  ' + moonPhases[nPhase]);

document.write('<b>   ' + daysToFullMoon + ' days to Full Moon ! </b> ');
// <i>image courtesy: https://commons.wikimedia.org/wiki/File:Lunar_Phases.jpg</i><br>


	window.addEventListener('load', () => {
	registerSW();
	});

	// Register the Service Worker
	async function registerSW() {
		if ('hw' in navigator) {
			try {
			await navigator
					.serviceWorker
					.register('hw.js');
			}
			catch (e) {
			console.log('SW registration failed');
			}
		}
	}
</script>


</body>
</html>
